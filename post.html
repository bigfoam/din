
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="UTF-8">
	<link rel="apple-touch-icon" sizes="57x57" href="images/icon/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="images/icon/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/icon/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="images/icon/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/icon/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="images/icon/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="images/icon/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="images/icon/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="images/icon/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192"  href="images/icon/android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="images/icon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="images/icon/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="images/icon/favicon-16x16.png">
	<link rel="manifest" href="images/icon/manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="images/icon/ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff">

	
	<title>Dinneract | Dashboard</title>
	
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css"/>
	<link rel="stylesheet" type="text/css" href="css/style.css"/>
	<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans"/>
	<link rel="stylesheet" type="text/css" href="css/font-awesome-4.3.0/css/font-awesome.min.css"/>
	
	
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

	<script type="text/javascript" src="js/move-top.js"></script>
	<script type="text/javascript" src="js/easing.js"></script>
	
	<style>
		
	</style>
</head>
<body>
<!---start-wrap---->
	<!---start-header---->
	<div class="header">
	<div class="wrap">
		<div class="logo">
			<a href="index.html"><img src="images/comp_logo.png"/></a>
		</div>
		<div class="head-nav">
			<ul>
				<li class="active"><a href="index.html#home" class="scroll">Home</a></li>	
			</ul>
		</div>
		<div class="clear"> </div>
	</div>
	<!---//End-header---->
	</div>
	
	<!---start-image-banner---->
	<div class="dash">
		<div class="content">
			
			<!--<div class="row" id="loading">
         		<img src="images/loading-cup.gif" style="display: hidden;"/>
			</div>-->
			
			<div class="row" id="">
         
        	</div>
				
		</div>
		<div class="clear"> </div>

	</div>
	<!---//End-image-banner---->
	
	<!---start-footer----->
	<div class="footer-dash">
		<div class="wrap">

				<div class="footer-left">
					<a href="index.html"><img src="images/comp_logo.png" alt="logo"/></a>
			  	</div>
				<div class="footer-center">
					<div class="cssmenu">
						<ul>
							<li><a href="#home">App</a></li> 
							<li><a href="mailto:service@dinneract.com">Contact</a></li>
							<!--support right now is not a popup -->
							<!-- <li><a href="#contact">Support</a></li> -->
							<li><a href="#terms" data-toggle="modal" data-backdrop="static">Terms</a></li> 
							<li><a href="#privacy" data-toggle="modal" data-backdrop="static">Privacy</a></li> 
				   		</ul>
					</div>
				</div>
			   	<div class="footer-right">
						<ul class="list-inline social-buttons">
	                        <li>
	                        	<a href="https://twitter.com/DinneractInc" target="_blank" class="tw">
	                        		<i class="fa fa-twitter" title="Twitter"></i>
	                        	</a>
	                        </li>
	                        <li>
	                        	<a href="https://www.facebook.com/dinneract" target="_blank" class="fb">
	                        		<i class="fa fa-facebook" title="Facebook"></i>
	                        	</a>
	                        </li>
	                        <li>
	                        	<a href="https://www.pinterest.com/dinneract/" target="_blank" class="pin">
	                        		<i class="fa fa-pinterest-p" title="Pinterest"></i>
	                        	</a>
	                        </li>
	                        <li>
	                        	<a href="https://instagram.com/dinneract/" target="_blank" class="inst">
	                        		<i class="fa fa-instagram" title="Instagram"></i>
	                        	</a>
	                        </li>
	                        <!--<li>
	                        	<a href="https://plus.google.com/u/3/107570138513629378277/posts" target="_blank" class="gplus">
	                        		<i class="fa fa-google-plus" title="Google+"></i>
	                        	</a>
	                        </li>-->
	                    </ul>
			 	</div>
	         	<div class="clear"></div>

        	<a href="#" id="toTop" style="display: block;"><span id="toTopHover" style="opacity: 1;"></span></a>
		</div>
		<!---//End-wrap---->
	</div>
	<!---//End-footer----->
	<div class="copy copy-dash">
		<p>&copy; 2014-2015 <a href="index.html"> Dinneract</a></p>
	</div>



	
	<!-- Modal -->
	<div id="terms" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	</div>
	<!-- End of Modal -->	
	
	
	<!-- Modal -->
	<div id="privacy" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	</div>
	<!-- End of Modal -->


	
	<script type="text/javascript">
		//global variables
		var apiURL = "http://54.148.158.185:3000/posts";
		
		
		//loading modals
		$("#privacy").load("inc/privacy.inc"); 
		$("#terms").load("inc/terms.inc"); 
		
		
		$(document).ready(function() {
			
			
    
    
		});//end of document.ready
		
		
		
		function loadPosts(postID) {
			
			var url = apiURL + "?id=" + postID;
					
			$.ajax({
				type: "GET",      
				url: url,
				cache: false,
				crossDomain: true,
				dataType: 'json',
				
				beforeSend: (function(myElements) {
					$('#loading').show();
				}),	
				
				success: (function(posts) {
					
					$('#loading').hide();
					
				    var postObjs = $();// empty jquery object
				    
					$.each( posts, function( i, post ) {
	
						postObjs = postObjs.add( createPost(post) );
				    });
				        	
				    var $container = $('#post-images');
				    //if($container.html().length > 0) {
				    //	$container.masonry( 'destroy' );
				    //}
	
				    if(offset == 0) {
				    	$container.append( postObjs );
				    	// initialize
					    $container.imagesLoaded( function() {
					      	$container.masonry({
					      			columnWidth: 260,
					      			itemSelector: '.post',
					      			isAnimated: true
					      	});
						});  
				    } else {
				    	$container.append( postObjs );

				    	$container.imagesLoaded( function() {		    		
					      	$container.masonry('appended', postObjs);
						});  
				    }
				    
				}),
				
				error: (function( jqXHR, textStatus ) {
					$('#loading').hide();

					alert( "Request failed: " + textStatus );
				})
			});
		}
		
		
		function createPost(post) {
			
			//console.log(post.title + " -- " + post.elements.length);
			
			var promoteName,
				postTime = new Date(post.createdAt),
				postDate = postTime.getFullYear() + "/" + postTime.getMonth() + "/" + postTime.getDay();
			
			if(post.elements.length > 0) {
				promoteName = post.elements[0].name;
			} else {
				promoteName = "<b color='red'>NULL</b>";
			}
				
			var template = $("<div class=\"post\"></div>")
				.append(
					$("<div class=\"like\"></div>").append(
						checkIfLiked("post", post._id) === false ? "<div class=\"unlike\"></div>" : "<div class=\"liked\"></div><span class=\"like_num\">" + likeNumFormat(post.likes) + "</span></div>"
					)
				)
				.append("<div class=\"img-container\"><img src=\"" + post.photo + "\" alt=\"\" class=\"img-rounded\"></div>")
				//.append("<div class=\"title\">" + post.title + "</div>")
				.append($("<div class=\"promote\"></div>").append(
						"<div class=\"tag\"><img src=\"" + "images/price_tag.png" + "\"/></div>"
					).append(
						"<div class=\"name\">" + promoteName + "</div>"
					)
				)
				.append(
					$("<div class=\"author\"><hr/></div>").append(
						"<div class=\"thumb\"><img src=\"" + "images/foodie.png" + "\"/></div>"
					).append(
						"<div class=\"name\"><span>" + "vendor name" + "</span></div>"
					)
				);
			
			//console.log($(template).html());
			
			return template;				 
		}
		
		function checkIfLiked(category, id) {
			//console.log(id);	
			if(Math.random() > 0.5) {
				return true;
			} else {
				return false;
			}
					
		}
		
		
		function likeNumFormat(num) {
			num = parseInt( Math.random() * 1e5 );
			
			if(num < 1e3) {
				return num;
			} else if(num < 1e6) {
				if(num < 1e5) {
					return (num/1e3).toPrecision(2) + 'k';
				} else {
					return (num/1e3).toPrecision(3) + 'k';
				}
			} else if(num < 1e9) {
				if(num < 1e8) {
					return (num/1e6).toPrecision(2) + 'm';
				} else {
					return (num/1e6).toPrecision(3) + 'm';
				}
			} else {
				return ">1b";
			}
		}
		
		
		function titleFormat(title) {
			
		//	var formatTitle,
		//		lineWidth = ,//remove padding
		//		charWidth = ,//related to font-size
			
		}
		
	</script>
</body>
</html>